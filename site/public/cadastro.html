<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro</title>
  <link rel="icon" type="image/jpg" href="./assets/logoIcon.png" />
  <link rel="stylesheet" href="./styles/style.css">
  <link rel="stylesheet" href="./styles/style_Cadastro.css">
</head>

<body>


  <header>
    <img src="./assets/logo.jpeg" width="135px" alt="Logo StrawTech">

    <ul>
        <li class="headerLi"><a class="a2" href="./index.html">Home</a></li>
        <li class="headerLi"><a class="a2"href="./Calculadora.html">Calculadora</a></li>
        <li class="headerLi"><a class="a2" href="./Produto.html">Produto</a></li>
      </ul>

    <h3 class="h3Header"><a href="./Login.html">Login</a></h3>

</header>


  <main>

    <div class="header-main-cadastro">
      <h1>Crie uma nova conta</h1>
      <p>Já possui uma conta? <a href="./Login.html">Login</a></p>
    </div>


    <div class="card-cadastro">

      <div class="card_input1">

        <div>
          <p class="input_texto">Nome da Empresa</p>
          <input type="text" class="input_decoracao" id="input_nome_empresa"><br>
          <div class="mensagem_validacao" id="div_nome_empresa"></div>
        </div>

        <div class="espaçoRegister">
          <p class="input_texto">Representante</p>
          <input type="text" class="input_decoracao" id="input_representante"><br>
          <div class="mensagem_validacao" id="div_representante"></div>

        </div>

      </div>
      <div class="card_input1">

        <div>
          <p class="input_texto">CNPJ</p>
          <input type="text" class="input_decoracao" id="input_cnpj"><br>
          <div class="mensagem_validacao" id="div_cnpj"></div>

        </div>

        <div class="espaçoRegister">
          <p class="input_texto">Endereço(CEP)</p>
          <input type="text" class="input_decoracao" id="input_endereco"><br>
          <div class="mensagem_validacao" id="div_endereco"></div>
        </div>


      </div>
      <div class="card_input1">

        <div>
          <p class="input_texto">Cidade</p>
          <input type="text" class="input_decoracao" id="input_cidade"><br>
          <div class="mensagem_validacao" id="div_cidade"></div>

        </div>

        <div class="espaçoRegister">
          <p class="input_texto">Bairro</p>
          <input type="text" class="input_decoracao" id="input_bairro"><br>
          <div class="mensagem_validacao" id="div_bairro"></div>
        </div>


      </div>
      <div class="card_input1">

        <div>
          <p class="input_texto">Nome da rua</p>
          <input type="text" class="input_decoracao" id="input_rua"><br>
          <div class="mensagem_validacao" id="div_rua"></div>

        </div>

        <div class="espaçoRegister">
          <p class="input_texto">Número</p>
          <input type="text" class="input_decoracao" id="input_numero_rua"><br>
          <div class="mensagem_validacao" id="div_numero_rua"></div>
        </div>


      </div>
      <div class="card_input1">

        <div>
          <p class="input_texto">E-mail</p>
          <input type="email" class="input_decoracao" id="input_email"><br>
          <div class="mensagem_validacao" id="div_email"></div>
        </div>

        <div class="espaçoRegister">
          <p class="input_texto">Senha</p>
          <input type="text" class="input_decoracao" id="input_senha"><br>
          <div class="mensagem_validacao" id="div_8caracter"></div>
          <div class="mensagem_validacao" id="div_especial"></div>
          <div class="mensagem_validacao" id="div_maiuscula"></div>
          <div class="mensagem_validacao" id="div_minuscula"></div>
          <div class="mensagem_validacao" id="div_numero"></div>
        </div>

      </div>

      <button onclick="cadastrar()" class="button_cadastrar">Cadastrar</button><br>


    </div>




  </main>

  <footer>
    <div class="rodape2">
      <br><br>
      <div class="labelIcones">
        <br>
        <a href="https://wa.me/+5511947693677/? text=" target="https://wa.me/+5511947693677/? text="> <img
            class="icones" src="./assets/whatsapp.png" alt=""></a>
        <a href="https://www.instagram.com/strawtechsp" target="https://www.instagram.com/strawtechsp"> <img
            class="icones" src="./assets/instagram.png" alt=""></a>
        <a href="https://github.com/StrawTech/Sprint2" target="https://github.com/StrawTech/Sprint2"> <img
            class="icones" src="./assets/github.png" alt=""></a>
        <br>
        <h5>2023 StrawTech. Todos os direitos reservados</h5>
      </div>
      <br>
    </div>

  </footer>
  <script>
    window.fwSettings = {
      'widget_id': 154000000865
    };
    !function () { if ("function" != typeof window.FreshworksWidget) { var n = function () { n.q.push(arguments) }; n.q = [], window.FreshworksWidget = n } }() 
  </script>
  <script type='text/javascript' src='https://widget.freshworks.com/widgets/154000000865.js' async defer></script>
</body>

</html>
<script>

  function cadastrar() {

    var nome_empresaVar = input_nome_empresa.value;
    var representanteVar = input_representante.value;
    var cnpjVar = input_cnpj.value;
    var enderecoVar = input_endereco.value;
    var cidadeVar = input_cidade.value;
    var bairroVar = input_bairro.value;
    var ruaVar = input_rua.value;
    var numero_ruaVar = input_numero_rua.value;
    var senhaVar = input_senha.value;
    var emailVar = input_email.value;


    fetch("/usuarios/cadastrar", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        // crie um atributo que recebe o valor recuperado aqui
        // Agora vá para o arquivo routes/usuario.js
        nomeEmpresaServer: nome_empresaVar,
        nomeRepresentanteServer: representanteVar,
        cnpjServer: cnpjVar,
        enderecoServer: enderecoVar,
        cidadeServer: cidadeVar,
        bairroServer: bairroVar,
        ruaServer: ruaVar,
        numeroRuaServer: numero_ruaVar,
        senhaServer: senhaVar,
        emailServer: emailVar

      }),
    })
      .then(function (resposta) {
        console.log("resposta: ", resposta);

        if (resposta.ok) {
          cardErro.style.display = "block";

          mensagem_erro.innerHTML =
            "Cadastro realizado com sucesso! Redirecionando para tela de Login...";

          setTimeout(() => {
            window.location = "login.html";
          }, "2000");

          limparFormulario();
          finalizarAguardar();
        } else {
          throw "Houve um erro ao tentar realizar o cadastro!";
        }
      })
      .catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
        finalizarAguardar();
      });

    return false;

  }


</script>